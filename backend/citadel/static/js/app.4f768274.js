(function(t){function e(e){for(var o,n,i=e[0],l=e[1],c=e[2],d=0,v=[];d<i.length;d++)n=i[d],Object.prototype.hasOwnProperty.call(r,n)&&r[n]&&v.push(r[n][0]),r[n]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);u&&u(e);while(v.length)v.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],o=!0,i=1;i<a.length;i++){var l=a[i];0!==r[l]&&(o=!1)}o&&(s.splice(e--,1),t=n(n.s=a[0]))}return t}var o={},r={app:0},s=[];function n(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=o,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(a,o,function(e){return t[e]}.bind(null,o));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";a("85ec")},"0405":function(t,e,a){},"108c":function(t,e,a){"use strict";a("a484")},"53a2":function(t,e,a){"use strict";a("0405")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var o=a("2b0e"),r=a("2f62");o["default"].use(r["a"]);var s=new r["a"].Store({}),n=s,i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"inspire"}},[a("router-view")],1)},l=[],c=(a("d093"),a("1157")),u=a.n(c),d={created:function(){localStorage.getItem("auth-token")&&u.a.ajaxSetup({headers:{Authorization:"Token "+localStorage.getItem("auth-token")}}),this.themeBrowser(),this.tokenGet()},methods:{themeBrowser:function(){window.matchMedia&&(window.matchMedia("(prefers-color-scheme: dark)").matches&&"true"!==localStorage.getItem("theme")?localStorage.setItem("theme",!0):"true"!==localStorage.getItem("theme")&&localStorage.removeItem("theme"))},tokenGet:function(){var t=this;u.a.post("http://localhost:8002/api/token/",{"auth-token":localStorage.getItem("auth-token")},(function(t){})).fail((function(e){localStorage.getItem("auth-token")&&(localStorage.removeItem("auth-token"),t.$router.push("/login"))}))}}},v=d,m=(a("034f"),a("2877")),p=a("6544"),f=a.n(p),h=a("7496"),_=Object(m["a"])(v,i,l,!1,null,null,null),g=_.exports;f()(_,{VApp:h["a"]});var b=a("8c4f"),y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-main",[!0===t.load?a("div",[a("loading")],1):a("div",[a("NavAndFooter"),a("v-container",{staticClass:"py-8 px-6",attrs:{fluid:""}},[a("div",[a("v-row",{attrs:{justify:"center"}},[a("v-dialog",{attrs:{persistent:"","max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,r=e.attrs;return[a("v-btn",t._g(t._b({staticStyle:{"margin-bottom":"10px","margin-top":"0","margin-left":"5px"},attrs:{color:"primary",dark:"",small:"",fab:"",title:"Добавить"},on:{click:function(e){return t.template_pays()}}},"v-btn",r,!1),o),[a("v-icon",{attrs:{dark:""}},[t._v("mdi-plus")])],1),a("v-btn",{staticStyle:{"margin-bottom":"10px","margin-top":"0","margin-left":"5px"},attrs:{color:"primary",dark:"",small:"",fab:"",title:"Обновить"},on:{click:t.userpays}},[a("v-icon",{attrs:{dark:""}},[t._v("mdi-refresh")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"text-h5"},[t._v("Добавить платеж")])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Назначение платежа*",hint:"Например, 'На молоко'",required:""},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Описание платежа"},model:{value:t.body,callback:function(e){t.body=e},expression:"body"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Сумма списания/пополнения*",hint:"Например, '200' для пополнения и '-200' для списания",required:""},model:{value:t.cost,callback:function(e){t.cost=e},expression:"cost"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-select",{attrs:{items:["Карта","Наличные"],label:"Тип платежа:*",required:""},model:{value:t.type_of_pays,callback:function(e){t.type_of_pays=e},expression:"type_of_pays"}})],1),a("templates",{attrs:{temp:t.templates_title},on:{changeData:t.changeData}})],1)],1),a("small",[t._v("*Обязательные поля")])],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v("Закрыть")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.paysSend}},[t._v("Сохранить")])],1)],1)],1)],1)],1),a("v-row",t._l(t.years,(function(e){return a("v-col",{key:e,attrs:{cols:"12"}},[a("p",[t._v(t._s(e)+" год")]),t._l(t.months,(function(o){return a("v-col",{directives:[{name:"show",rawName:"v-show",value:0!==t.monthes(o,t.pays)&&(0!==t.monthsPays(o,e)[0]||0!==t.monthsPays(o,e)[1]),expression:"monthes(month, pays) !== 0  && (monthsPays(month, year)[0] !==0  || monthsPays(month, year)[1]!==0)"}],key:o,attrs:{cols:"12"}},[0!==t.monthsPays(o,e)[0]||0!==t.monthsPays(o,e)[1]?a("v-card",[a("v-subheader",[t._v(t._s(o)+" - Потрачено: "+t._s(t.monthsPays(o,e)[1])+" руб. Получено: "+t._s(t.monthsPays(o,e)[0])+" руб. Итог: "+t._s(t.monthsPays(o,e)[0]-Math.abs(t.monthsPays(o,e)[1]))+" руб.")]),a("v-list",{attrs:{"two-line":""}},[t._l(t.pays,(function(r){return[a("div",{key:r.id},[o===r.month&&e===t.yearDate(r.data)?a("v-list-item",[a("v-list-item-icon",["наличные"==r.type_of_pays?a("v-icon",[t._v("mdi-cash")]):"карта"==r.type_of_pays?a("v-icon",[t._v("mdi-credit-card")]):a("v-icon",[t._v("mdi-help")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(r.title))]),a("v-list-item-subtitle",{staticClass:"xs"},[t._v(t._s(r.cost)+" руб., "+t._s(t.formatDate(r.data)))])],1),a("v-col",{staticClass:"xs",attrs:{cols:"auto"}},[a("v-dialog",{attrs:{transition:"dialog-bottom-transition","max-width":"600"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,s=e.attrs;return[a("v-btn",t._g(t._b({attrs:{color:"primary"}},"v-btn",s,!1),o),[a("v-icon",[t._v("mdi-information")])],1),a("v-btn",{staticClass:"ml-2",attrs:{color:"error"},on:{click:function(e){return t.deletePays(r.id)}}},[a("v-icon",[t._v("mdi-delete")])],1)]}},{key:"default",fn:function(e){return[a("v-card",[a("v-toolbar",{attrs:{color:"primary",dark:""}},[t._v(t._s(r.title))]),a("v-card-text",[a("div",{staticClass:"text-h5 pa-5"},[t._v("Назначение платежа: "+t._s(r.title))]),a("div",{staticClass:"text-h5 pa-5"},[t._v("Сумма платежа: "+t._s(r.cost)+" руб.")]),a("div",{staticClass:"text-h5 pa-5"},[t._v("Тип платежа: "+t._s(r.type_of_pays))]),a("div",{staticClass:"text-h5 pa-5"},[t._v("Описание платежа: "+t._s(r.body))]),a("div",{staticClass:"text-h5 pa-5"},[t._v("Дата платежа: "+t._s(t.formatDate(r.data)))])]),a("v-card-actions",{staticClass:"justify-end"},[a("v-btn",{attrs:{text:""},on:{click:function(e){return t.templatesSend(r)}}},[t._v("Добавить в шаблон")]),a("v-btn",{attrs:{text:""},on:{click:function(t){e.value=!1}}},[t._v("Закрыть")])],1)],1)]}}],null,!0)})],1)],1):t._e()],1)]}))],2)],1):t._e()],1)}))],2)})),1)],1)],1)])},x=[],k=(a("a630"),a("3ca3"),a("d3b7"),a("6062"),a("ddb0"),a("a9e3"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-navigation-drawer",{attrs:{"mini-variant":t.mini,permanent:"",app:""},on:{"update:miniVariant":function(e){t.mini=e},"update:mini-variant":function(e){t.mini=e}},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("p",{staticStyle:{"text-align":"center",margin:"0"}},[a("v-sheet",{staticClass:"pa-4",attrs:{color:"light"}},[!1===t.mini?a("div",[null!==t.user.photo?a("v-avatar",{staticClass:"mb-4",attrs:{color:"grey darken-1",size:"64"}},[a("img",{attrs:{src:""+t.user.photo}})]):a("v-avatar",{staticClass:"mb-4",attrs:{color:"grey darken-1",size:"64"}},[a("img",{attrs:{src:""}})]),""===t.user.first_name&&""===t.user.last_name?a("div",{staticClass:"mb-2"},[t._v(t._s(t.user.username)+" ("+t._s(t.user.email)+")")]):a("div",{staticClass:"mb-2"},[t._v(t._s(t.user.first_name)+" "+t._s(t.user.last_name))]),a("v-btn",{staticClass:"button-nav",attrs:{color:"primary",title:"Выход"},on:{click:t.logout}},[a("v-icon",[t._v("mdi-exit-run")])],1),a("v-btn",{staticClass:"button-nav",attrs:{color:"primary",title:"Сменить тему"},on:{click:t.theme}},[a("v-icon",[t._v("mdi-theme-light-dark")])],1),a("v-btn",{staticClass:"button-nav",attrs:{color:"primary",title:"Свернуть панель"},on:{click:function(e){e.stopPropagation(),t.mini=!t.mini}}},[a("v-icon",[t._v("mdi-chevron-left")])],1)],1):a("div",{staticStyle:{"margin-left":"-10px"}},[null!==t.user.photo?a("v-avatar",{attrs:{color:"grey darken-1",size:"44"}},[a("img",{attrs:{src:""+t.user.photo}})]):a("v-avatar",{attrs:{color:"grey darken-1",size:"44"}},[a("img",{attrs:{src:""}})])],1)])],1),a("v-divider"),a("v-list",t._l(t.links,(function(e){var o=e[0],r=e[1],s=e[2];return a("v-list-item",{key:o,attrs:{link:"",to:r}},[a("v-list-item-icon",[a("v-icon",[t._v(t._s(o))])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(s))])],1)],1)})),1)],1)],1)}),w=[],V={data:function(){return{drawer:null,links:[["mdi-cash","/","Расходы/Доходы"],["mdi-pen","/notes","Заметки"],["mdi-account-cog","/profile","Настройки профиля"]],mini:!0,user:[]}},created:function(){this.token=localStorage.getItem("auth-token"),u.a.ajaxSetup({headers:{Authorization:"Token ".concat(localStorage.getItem("auth-token"))}}),this.userinfo()},methods:{userinfo:function(){var t=this;u.a.get("http://localhost:8002/api/user/",(function(e){t.user=e[0]}))},logout:function(){u.a.post("http://localhost:8002/auth/token/logout/",this.token,(function(t){})),localStorage.removeItem("auth-token"),localStorage.removeItem("username"),window.location="/login"},theme:function(){"true"!==localStorage.getItem("theme")?localStorage.setItem("theme",!0):localStorage.removeItem("theme"),location.reload()}}},S=V,C=(a("108c"),a("8212")),I=a("8336"),T=a("ce7e"),j=a("132d"),L=a("8860"),N=a("da13"),O=a("5d23"),E=a("34c3"),P=a("f774"),D=a("8dd9"),F=Object(m["a"])(S,k,w,!1,null,"8ee1281a",null),A=F.exports;f()(F,{VAvatar:C["a"],VBtn:I["a"],VDivider:T["a"],VIcon:j["a"],VList:L["a"],VListItem:N["a"],VListItemContent:O["a"],VListItemIcon:E["a"],VListItemTitle:O["c"],VNavigationDrawer:P["a"],VSheet:D["a"]});var q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-select",{attrs:{items:t.temp,label:"Вставить данные из шаблона"},model:{value:t.temps,callback:function(e){t.temps=e},expression:"temps"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-btn",{staticStyle:{"margin-top":"15px"},attrs:{color:"blue darken-1",text:""},on:{click:t.titleSend}},[t._v("Вставить")])],1)],1)],1)},M=[],R={props:["temp"],data:function(){return{temps:""}},methods:{titleSend:function(){this.$emit("changeData",this.temps)}}},B=R,J=a("62ad"),z=a("a523"),U=a("0fd9"),G=a("b974"),K=Object(m["a"])(B,q,M,!1,null,null,null),H=K.exports;f()(K,{VBtn:I["a"],VCol:J["a"],VContainer:z["a"],VRow:U["a"],VSelect:G["a"]});var Q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-center centered"},[t._v(" Загрузка... ")])},W=[],X=(a("53a2"),{}),Y=Object(m["a"])(X,Q,W,!1,null,null,null),Z=Y.exports,tt={components:{NavAndFooter:A,Loading:Z,Templates:H},metaInfo:{title:"Расходы/Доходы - Цитадель"},name:"Cash",data:function(){return{loading:null,load:null,years:[],months:["Декабрь","Ноябрь","Октябрь","Сентябрь","Август","Июль","Июнь","Май","Апрель","Март","Февраль","Январь"],value:[],months_pays:[],dialog:!1,pays:[],author_name:"",title:"",body:"",cost:"",type_of_pays:"",data:"",month:"",templates:[],templates_title:[]}},created:function(){this.userpays(),this.monthes()},methods:{template_pays:function(){var t=this;u.a.get("http://localhost:8002/api/templates/",(function(e){t.templates=e;for(var a=0;a<t.templates.length;a++)t.templates_title.push(t.templates[a].body_template.title)}))},userpays:function(){var t=this;this.load=!0,u.a.get("http://localhost:8002/api/pays/",(function(e){document.cookie="auth_token=; max-age=-1",t.pays=e;for(var a=[],o=0;o<t.pays.length;o++)a.unshift(t.yearDate(t.pays[o].data));t.years=Array.from(new Set(a)),t.title="",t.body="",t.cost="",t.type_of_pays="",t.load=!1}))},changeData:function(t){this.templatesPaste(t)},deletePays:function(t){u.a.ajax({url:"http://localhost:8002/api/pays/"+t+"/delete_pays/",type:"DELETE",success:function(t){alert("Удалено")},error:function(t){alert(t.responseJSON)}}),this.userpays()},monthes:function(t,e,a){for(var o=0,r=0;r<e.length;r++)e[r].month===t&&(o+=1);return o},monthsPays:function(t,e){for(var a=0,o=0,r=0;r<this.pays.length;r++){var s=Number(this.pays[r].cost);this.pays[r].month===t&&this.yearDate(this.pays[r].data)===e&&(s>0?a+=s:o+=s)}return[a,o]},paysSend:function(t){var e=(new Date).toLocaleString("ru",{month:"long"}),a={title:this.title,body:this.body,type_of_pays:this.type_of_pays.toLowerCase(),cost:this.cost,month:e[0].toUpperCase()+e.substr(1).toLowerCase()};u.a.post("http://localhost:8002/api/pays/",a,(function(t){})).fail((function(t){alert(t.responseText)})),this.dialog=!1,setTimeout(this.userpays,1500)},templatesPaste:function(t){var e=this.templates[this.templates_title.indexOf(t)].body_template;for(var a in e)this[a]=e[a]},templatesSend:function(t){var e={title:t.title,body:t.body,cost:t.cost,type_of_pays:t.type_of_pays},a={body_template:JSON.stringify(e)};u.a.post("http://localhost:8002/api/templates/",a,(function(t){})).fail((function(t){alert(t.responseText)}))},formatDate:function(t){var e={year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"};return new Date(t).toLocaleDateString("ru",e)},monthString:function(t){var e={month:"long"};return new Date(t).toLocaleDateString("ru",e)},yearDate:function(t){var e={year:"numeric"};return new Date(t).toLocaleDateString("ru",e)}}},et=tt,at=a("b0af"),ot=a("99d9"),rt=a("169a"),st=a("f6c4"),nt=a("2fa4"),it=a("e0c7"),lt=a("8654"),ct=a("71d9"),ut=Object(m["a"])(et,y,x,!1,null,null,null),dt=ut.exports;f()(ut,{VBtn:I["a"],VCard:at["a"],VCardActions:ot["a"],VCardText:ot["b"],VCardTitle:ot["c"],VCol:J["a"],VContainer:z["a"],VDialog:rt["a"],VIcon:j["a"],VList:L["a"],VListItem:N["a"],VListItemContent:O["a"],VListItemIcon:E["a"],VListItemSubtitle:O["b"],VListItemTitle:O["c"],VMain:st["a"],VRow:U["a"],VSelect:G["a"],VSpacer:nt["a"],VSubheader:it["a"],VTextField:lt["a"],VToolbar:ct["a"]});var vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-main",[!0===t.load?a("div",[a("loading")],1):a("div",[a("NavAndFooter"),a("v-container",{staticClass:"py-8 px-6",attrs:{fluid:""}},[a("div",[a("v-row",{attrs:{justify:"center"}},[a("v-dialog",{attrs:{persistent:"","max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,r=e.attrs;return[a("v-btn",t._g(t._b({staticStyle:{"margin-bottom":"10px","margin-top":"0","margin-left":"5px"},attrs:{color:"primary",dark:"",small:"",fab:"",title:"Добавить"}},"v-btn",r,!1),o),[a("v-icon",{attrs:{dark:""}},[t._v("mdi-plus")])],1),a("v-btn",{staticStyle:{"margin-bottom":"10px","margin-top":"0","margin-left":"5px"},attrs:{color:"primary",dark:"",small:"",fab:"",title:"Обновить"},on:{click:t.userNotes}},[a("v-icon",{attrs:{dark:""}},[t._v("mdi-refresh")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"text-h5"},[t._v("Добавить заметку")])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Название",required:""},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),a("v-col",{attrs:{cols:"12"}},[a("ckeditor",{attrs:{editor:t.editor,config:t.editorConfig},model:{value:t.body,callback:function(e){t.body=e},expression:"body"}})],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v("Закрыть")]),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:t.notesSend}},[t._v("Сохранить")])],1)],1)],1)],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},t._l(t.notes,(function(e){return a("v-card",{directives:[{name:"show",rawName:"v-show",value:t.notes.length>0,expression:"notes.length > 0"}],key:e.id},[a("v-list",{attrs:{"two-line":""}},[[a("v-list-item",[a("v-list-item-avatar",[a("v-icon",[t._v("mdi-pen")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(e.title))])],1),a("v-col",{attrs:{cols:"auto"}},[a("v-dialog",{attrs:{transition:"dialog-bottom-transition","max-width":"600"},scopedSlots:t._u([{key:"activator",fn:function(o){var r=o.on,s=o.attrs;return[a("v-btn",t._g(t._b({attrs:{color:"success"}},"v-btn",s,!1),r),[a("v-icon",[t._v("mdi-pen")])],1),a("v-btn",{staticClass:"ml-2",attrs:{color:"error"},on:{click:function(a){return t.deleteNotes(e.id)}}},[a("v-icon",[t._v("mdi-delete")])],1)]}},{key:"default",fn:function(o){return[a("v-card",[a("v-card-title",[a("span",{staticClass:"text-h5"},[t._v("Редактировать заметку")])]),a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Название"},model:{value:e.title,callback:function(a){t.$set(e,"title",a)},expression:"n.title"}})],1),a("v-col",{attrs:{cols:"12"}},[a("ckeditor",{staticStyle:{backround:"red"},attrs:{editor:t.editor,config:t.editorConfig},model:{value:e.body,callback:function(a){t.$set(e,"body",a)},expression:"n.body"}})],1)],1)],1),a("v-card-text"),a("v-card-actions",{staticClass:"justify-end"},[a("v-btn",{attrs:{text:""},on:{click:function(t){o.value=!1}}},[t._v("Закрыть")]),a("v-btn",{attrs:{text:""},on:{click:function(a){return t.editNotes(e.id,e.title,e.body)}}},[t._v("Изменить")])],1)],1)]}}],null,!0)})],1)],1)]],2)],1)})),1)],1)],1)],1)])},mt=[],pt=(a("ac1f"),a("466d"),a("fb3d")),ft=a.n(pt),ht=(a("1951"),{components:{NavAndFooter:A,Loading:Z},metaInfo:{title:"Заметки - Цитадель"},name:"Notes",data:function(){return{editor:ft.a,editorConfig:{language:"ru"},load:null,dialog:!1,notes:[],person_name:"",title:"",body:""}},created:function(){this.userNotes()},methods:{userNotes:function(){var t=this;this.load=!0,u.a.get("http://localhost:8002/api/notes/",(function(e){t.notes=e,t.load=!1}))},findLink:function(t){var e=t;if(e=e.match(/(https?:\/\/[^\s]+)/g),String(e))return'<a href="'+e+'">Перейти по ссылке</a>'},notesSend:function(){var t={title:this.title,body:this.body};u.a.post("http://localhost:8002/api/notes/",t,(function(t){})).fail((function(t){alert(t.responseText)})),this.dialog=!1,setTimeout(this.userNotes,1500)},deleteNotes:function(t){u.a.ajax({url:"http://localhost:8002/api/notes/"+t+"/delete_notes/",type:"DELETE",success:function(t){alert("Удалено")},error:function(t){alert(t.responseJSON)}}),this.userNotes()},editNotes:function(t,e,a){var o={id:t,title:e,body:a};u.a.post("http://localhost:8002/api/notes/"+t+"/edit_notes/",o,(function(t){})).fail((function(t){alert(t.responseText)})),this.dialog=!1,setTimeout(this.userNotes,1500)}}}),_t=ht,gt=a("8270"),bt=Object(m["a"])(_t,vt,mt,!1,null,null,null),yt=bt.exports;f()(bt,{VBtn:I["a"],VCard:at["a"],VCardActions:ot["a"],VCardText:ot["b"],VCardTitle:ot["c"],VCol:J["a"],VContainer:z["a"],VDialog:rt["a"],VIcon:j["a"],VList:L["a"],VListItem:N["a"],VListItemAvatar:gt["a"],VListItemContent:O["a"],VListItemTitle:O["c"],VMain:st["a"],VRow:U["a"],VSpacer:nt["a"],VTextField:lt["a"]});var xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",[a("v-container",{staticClass:"loginOverlay",attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{flex:"","align-center":"","justify-center":""}},[a("v-flex",{attrs:{xs12:"",sm4:"","elevation-6":""}},[a("v-alert",{directives:[{name:"show",rawName:"v-show",value:t.non_field_errors.length>0,expression:"non_field_errors.length > 0"}],attrs:{dense:"",outlined:"",type:"error",dismissible:""}},[t._v(t._s(t.non_field_errors))]),a("v-toolbar",{staticClass:"pt-5 blue darken-4 d-flex justify-space-around"},[a("v-toolbar-title",{staticClass:"white--text mb-6"},[a("h4",[t._v("Вход в Цитадель")])])],1),a("v-card",[a("v-card-text",{staticClass:"pt-4"},[a("div",[a("v-form",{ref:"form"},[a("v-text-field",{attrs:{label:"Логин",required:""},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),a("v-text-field",{attrs:{label:"Пароль",type:"password",required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),a("v-layout",{attrs:{"justify-space-between":""}},[a("v-btn",{on:{click:t.signIn}},[t._v("Войти")]),a("p",[a("a",{attrs:{href:"/registraitions"}},[t._v("Регистрация")])])],1),a("v-layout",{attrs:{"justify-space-between":""}},[a("p",[t._v(" Войти с помощью: "),a("a",{attrs:{href:"https://oauth.vk.com/authorize?client_id=8035574&display=page&redirect_uri=http%3A%2F%2Flocalhost%3A8002%2Fvk-callback&scope=email&response_type=code&v=5.131&state="+t.getRandomIntInclusive(1e5,999999)}},[a("img",{staticStyle:{"border-radius":"5px","margin-right":"5px"},attrs:{src:"https://vk.com/images/icons/pwa/apple/default.png?11",witdh:"25px",height:"25px",alt:"VK",title:"Войти через Вконтакте"}})])])])],1)],1)])],1)],1)],1)],1)],1)},kt=[],wt=(a("4d63"),a("25f0"),{metaInfo:{title:"Вход в систему"},data:function(){return{username:"",password:"",non_field_errors:""}},created:function(){this.cookies(),this.getRandomIntInclusive()},methods:{getRandomIntInclusive:function(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1)+t)},cookies:function(){var t=document.cookie.match(new RegExp("(^| )auth_token=([^;]+)"));null!=t&&(localStorage.setItem("auth-token",t[2]),this.$router.push("/"),location.reload())},signIn:function(){var t=this,e={username:this.username,password:this.password};u.a.post("http://localhost:8002/auth/token/login/",e,(function(e){localStorage.setItem("auth-token",e.auth_token),t.$router.push("/"),location.reload()})).fail((function(e){var a=e.responseJSON;t.non_field_errors=a.non_field_errors.toString()}))}}}),Vt=wt,St=a("0798"),Ct=a("0e8f"),It=a("4bd4"),Tt=a("a722"),jt=a("2a7f"),Lt=Object(m["a"])(Vt,xt,kt,!1,null,null,null),Nt=Lt.exports;f()(Lt,{VAlert:St["a"],VBtn:I["a"],VCard:at["a"],VCardText:ot["b"],VContainer:z["a"],VFlex:Ct["a"],VForm:It["a"],VLayout:Tt["a"],VTextField:lt["a"],VToolbar:ct["a"],VToolbarTitle:jt["a"]});var Ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-main",[!0===t.load?a("div",[a("loading")],1):a("div",[a("NavAndFooter"),a("v-card",{staticClass:"mx-auto",attrs:{"max-width":"100%",tile:""}},[a("v-col",[a("p",{staticStyle:{"text-align":"center",margin:"0"}},[a("v-avatar",{attrs:{size:"100"}},[a("v-img",{attrs:{src:""+t.user.photo}})],1)],1)]),a("v-list-item",{attrs:{color:"rgba(0, 0, 0, .4)"}},[a("v-list-item-content",{attrs:{justify:"center"}},[a("v-list-item-title",{staticClass:"title",staticStyle:{"text-align":"center"}},[t._v("Логин: "+t._s(t.user.username))]),a("v-list-item-title",{staticClass:"title",staticStyle:{"text-align":"center"}},[t._v("Имя: "+t._s(t.user.first_name))]),a("v-list-item-title",{staticClass:"title",staticStyle:{"text-align":"center"}},[t._v("Фамилия: "+t._s(t.user.last_name))]),a("v-list-item-title",{staticClass:"title",staticStyle:{"text-align":"center"}},[t._v("Почта: "+t._s(t.user.email))]),a("div",{staticStyle:{"margin-top":"15px","margin-bottom":"10px"}},[a("v-row",{attrs:{justify:"center"}},[a("v-dialog",{attrs:{persistent:"","max-width":"600px"},scopedSlots:t._u([{key:"activator",fn:function(e){var o=e.on,r=e.attrs;return[a("v-btn",t._g(t._b({attrs:{color:"primary",dark:""}},"v-btn",r,!1),o),[t._v("Pедактировать")])]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"text-h5"},[t._v("Редактировать профиль")])]),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-file-input",{attrs:{accept:"image/*",label:"Фото","prepend-icon":"mdi-camera"},on:{change:t.onFileChange}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Логин*",required:"",clearable:""},model:{value:t.login,callback:function(e){t.login=e},expression:"login"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"E-mail*",required:"",clearable:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Имя*",required:"",clearable:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),a("v-col",{attrs:{cols:"12",sm:"6",md:"6"}},[a("v-text-field",{attrs:{label:"Фамилия*",required:"",clearable:""},model:{value:t.family,callback:function(e){t.family=e},expression:"family"}})],1),a("v-col",{attrs:{cols:"12",sm:"10",md:"10"}},[a("v-radio-group",{attrs:{row:""},scopedSlots:t._u([{key:"label",fn:function(){return[a("div",[t._v(" Вы согласны получать копию расходов/доходов на "),a("strong",[t._v("е-mail")]),t._v("? ")])]},proxy:!0}]),model:{value:t.row,callback:function(e){t.row=e},expression:"row"}},[a("v-radio",{attrs:{value:"true"},scopedSlots:t._u([{key:"label",fn:function(){return[a("div",[a("strong",{staticClass:"success--text"},[t._v("Да")])])]},proxy:!0}])}),a("v-radio",{attrs:{value:"false"},scopedSlots:t._u([{key:"label",fn:function(){return[a("div",[a("strong",{staticClass:"error--text"},[t._v("Нет")])])]},proxy:!0}])})],1)],1)],1)],1),a("small",[t._v("*Обязательные поля")])],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v("Закрыть")]),a("v-btn",{attrs:{color:"blue darken-1",type:"submit",text:""},on:{click:t.updateUser}},[t._v("Сохранить")])],1)],1)],1)],1)],1)],1)],1)],1)],1)])},Et=[],Pt=(a("9911"),a("b0c0"),{components:{NavAndFooter:A,Loading:Z},metaInfo:{title:"Профиль - Цитадель"},data:function(){return{load:null,user:[],dialog:!1,link:"",login:"",email:"",name:"",family:"",row:""}},created:function(){this.users()},methods:{onFileChange:function(t){this.link=t},users:function(){var t=this;this.load=!0,u.a.get("http://localhost:8002/api/user/",(function(e){t.user=e[0],t.name=t.user.first_name,t.login=t.user.username,t.family=t.user.last_name,t.email=t.user.email,t.row=t.user.email_send.toString(),t.load=!1}))},updateAvatar:function(){var t=new FormData;t.append("photo",this.link),u.a.ajax({url:"http://localhost:8002/api/user-avatar/",data:t,type:"POST",processData:!1,contentType:!1,success:function(t){},error:function(t){var e=t.responseJSON;for(var a in e)alert(a,e[a].toString())}})},updateUser:function(){u.a.ajax({url:"http://localhost:8002/api/update_profile/",data:{username:this.login,first_name:this.name,last_name:this.family,email:this.email,email_send:this.row},type:"PUT",success:function(t){location.reload()},error:function(t){var e=t.responseJSON;for(var a in e)alert(a,e[a].toString())}}),""!==this.link&&this.updateAvatar()}}}),Dt=Pt,Ft=a("23a7"),At=a("adda"),$t=a("67b6"),qt=a("43a6"),Mt=Object(m["a"])(Dt,Ot,Et,!1,null,null,null),Rt=Mt.exports;f()(Mt,{VAvatar:C["a"],VBtn:I["a"],VCard:at["a"],VCardActions:ot["a"],VCardText:ot["b"],VCardTitle:ot["c"],VCol:J["a"],VContainer:z["a"],VDialog:rt["a"],VFileInput:Ft["a"],VImg:At["a"],VListItem:N["a"],VListItemContent:O["a"],VListItemTitle:O["c"],VMain:st["a"],VRadio:$t["a"],VRadioGroup:qt["a"],VRow:U["a"],VSpacer:nt["a"],VTextField:lt["a"]});var Bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",[a("v-container",{staticClass:"loginOverlay",attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{flex:"","align-center":"","justify-center":""}},[a("v-flex",{attrs:{xs12:"",sm4:"","elevation-6":""}},[a("v-toolbar",{staticClass:"pt-5 blue darken-4 d-flex justify-space-around"},[a("v-toolbar-title",{staticClass:"white--text mb-6"},[a("h4",[t._v("Регистрация в Цитадель")])])],1),a("v-card",[a("v-card-text",{staticClass:"pt-4"},[a("div",[a("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{label:"E-mail",rules:[t.rules.email],required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("v-text-field",{attrs:{label:"Логин",rules:[t.rules.username],required:""},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),a("v-text-field",{attrs:{label:"Пароль",rules:[t.rules.password],type:"password",required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),a("v-layout",{attrs:{"justify-space-between":""}},[a("v-btn",{on:{click:t.signUp}},[t._v("Регистрация")])],1)],1)],1)])],1)],1)],1)],1)],1)},Jt=[],zt={metaInfo:{title:"Регистрация"},data:function(){var t=this;return{valid:!1,email:"",username:"",usernameError:"",emailError:"",passwordError:"",password:"",errors:{},rules:{username:function(e){return t.usernameError.toString()},password:function(e){return t.passwordError},email:function(e){var a=t.emailError.toString();return a}}}},methods:{signUp:function(){var t=this,e={email:this.email,username:this.username,password:this.password};u.a.post("http://localhost:8002/auth/users/",e,(function(e){t.$router.push("/login")})).fail((function(e){for(var a=e.responseJSON,o="",r=0;r<a.password.length;r++)o+=a.password[r];t.passwordError=o,t.usernameError=a.username,t.emailError=a.email}))}}},Ut=zt,Gt=Object(m["a"])(Ut,Bt,Jt,!1,null,null,null),Kt=Gt.exports;f()(Gt,{VBtn:I["a"],VCard:at["a"],VCardText:ot["b"],VContainer:z["a"],VFlex:Ct["a"],VForm:It["a"],VLayout:Tt["a"],VTextField:lt["a"],VToolbar:ct["a"],VToolbarTitle:jt["a"]});var Ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("main",[a("v-container",{staticClass:"loginOverlay",attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{flex:"","align-center":"","justify-center":""}},[a("v-flex",{attrs:{xs12:"",sm4:"","elevation-6":""}},[a("v-alert",{directives:[{name:"show",rawName:"v-show",value:t.non_field.length>0,expression:"non_field.length > 0"}],attrs:{dense:"",outlined:"",type:"error",dismissible:""}},[t._v(t._s(t.non_field))]),a("v-toolbar",{staticClass:"pt-5 blue darken-4 d-flex justify-space-around"},[a("v-toolbar-title",{staticClass:"white--text mb-6"},[a("h4",[t._v("Восстановление")])])],1),a("v-card",[a("v-card-text",{staticClass:"pt-4"},[a("div",[a("h3",{staticStyle:{"text-align":"center"}},[a("strong",[t._v("Укажите логин")])]),a("p",[t._v("Пожалуйста, укажите логин, который вы использовали для входа на сайт.")]),a("v-form",{ref:"form"},[a("v-text-field",{attrs:{label:"Логин",required:""},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),a("v-text-field",{attrs:{label:"Пароль",type:"password",required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),a("v-text-field",{attrs:{label:"Повторите пароль",type:"password",required:""},model:{value:t.new_password,callback:function(e){t.new_password=e},expression:"new_password"}}),a("v-layout",{attrs:{"justify-space-between":""}},[a("v-btn",{attrs:{color:"primary"},on:{click:t.sendNewPassword}},[t._v("Обновить")]),a("a",{attrs:{href:"/login"}},[t._v("Вернуться назад")])],1)],1)],1)])],1)],1)],1)],1)],1)},Qt=[],Wt={metaInfo:{title:"Восстановление"},data:function(){return{non_field:"",username:"",password:"",new_password:""}},methods:{sendNewPassword:function(){var t=this,e={login:this.username,password_1:this.password,password_2:this.new_password};$.post("http://localhost:8002/api/password/change_password/change_password/",e,(function(e){t.$router.push("/login")})).fail((function(e){var a=e.responseJSON;t.non_field=a.toString()}))}}},Xt=Wt,Yt=Object(m["a"])(Xt,Ht,Qt,!1,null,null,null),Zt=Yt.exports;f()(Yt,{VAlert:St["a"],VBtn:I["a"],VCard:at["a"],VCardText:ot["b"],VContainer:z["a"],VFlex:Ct["a"],VForm:It["a"],VLayout:Tt["a"],VTextField:lt["a"],VToolbar:ct["a"],VToolbarTitle:jt["a"]}),o["default"].use(b["a"]);var te=[{path:"/",name:"Cash",component:dt},{path:"/notes",name:"Notes",component:yt},{path:"/login",name:"Login",component:Nt},{path:"/reset-password",name:"Reset",component:Zt},{path:"/profile",name:"Profile",component:Rt},{path:"/registraitions",name:"Register",component:Kt}],ee=new b["a"]({mode:"history",routes:te});ee.beforeEach((function(t,e,a){null!==localStorage.getItem("auth-token")||"/login"===t.path||"/registraitions"===t.path||"/reset-password"===t.path?a():a("/login")}));var ae=ee,oe=a("f309");o["default"].use(oe["a"]);var re=new oe["a"]({theme:{dark:localStorage.getItem("theme")}}),se=a("58ca"),ne=a("6930"),ie=a.n(ne),le=a("5f5b"),ce=a("b1e0");a("f9e3"),a("2dd8");o["default"].use(le["a"]),o["default"].use(ce["a"]),o["default"].use(se["a"]),o["default"].use(ie.a),o["default"].config.productionTip=!1,new o["default"]({router:ae,vuetify:re,store:n,render:function(t){return t(g)}}).$mount("#app")},"85ec":function(t,e,a){},a484:function(t,e,a){}});
//# sourceMappingURL=app.4f768274.js.map